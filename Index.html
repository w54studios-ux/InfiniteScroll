<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Judul diubah -->
    <title>Sticker Refresh Grid</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load GSAP (GreenSock Animation Platform) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
      /* Use Inter font from Google Fonts */
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
      body {
        font-family: 'Inter', sans-serif;
        /* PERUBAHAN: Halaman DIBUAT BISA DI-SCROLL */
        overflow: auto;
      }
      .sticker-wrapper {
        will-change: opacity, transform;
      }
      #sticker-background {
        overflow: visible;
        /* PERUBAHAN: Dibuat h-auto agar tingginya pas dengan grid */
        height: auto;
      }
    </style>
  </head>
  <!-- PERUBAHAN: Background diubah ke bg-rose-50 dan text-gray-800 dihapus -->
  <body class="bg-rose-50">
    <!-- PERUBAHAN: Div background z-[-1] dihapus -->

    <!-- PERUBAHAN: Wrapper h-screen dihapus agar body bisa scroll -->
    <div class="relative w-full">
      <!-- Sticker Background dipindah ke atas, dibuat 'fixed' dan 'z-0' -->
      <div
        id="sticker-background"
        class="fixed inset-0 z-0"
      >
        <div id="sticker-grid" class="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-9 gap-0 p-0 h-full">
          <!-- Stickers (Images) will be generated by JavaScript here -->
        </div>
      </div>

      <!-- Gradient Fades ditambahkan kembali dengan z-5 -->
      <div
        class="fixed top-0 left-0 w-full h-[20vh] bg-gradient-to-b from-rose-50 to-transparent z-5 pointer-events-none"
      ></div>
      <div
        class="fixed bottom-0 left-0 w-full h-[20vh] bg-gradient-to-t from-rose-50 to-transparent z-5 pointer-events-none"
      ></div>

      <!--
        Konten Testimonial
        PERUBAHAN: Konten tengah diganti total
      -->
      <div
        class="relative z-10 flex flex-col items-center w-full p-8 pt-20 pb-10"
        style="pointer-events: none;"
      >
        <!-- 1. Header Card -->
        <div
          class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-md mb-6 text-center"
        >
          <span
            class="bg-pink-100 text-pink-600 font-semibold text-xs py-1.5 px-3 rounded-full inline-flex items-center gap-1.5"
          >
            <!-- Ikon Bintang -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="12"
              height="12"
              viewBox="0 0 24 24"
              fill="currentColor"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polygon
                points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
              />
            </svg>
            LOVED BY 150K+ USERS
          </span>
          <h2 class="text-3xl font-bold text-gray-900 mt-3">
            see why people are
            <span class="text-pink-500">obsessed</span>
          </h2>
        </div>

        <!-- 2. Review Card 1 -->
        <div
          class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-md mb-4 flex items-start gap-5"
        >
          <!-- Avatar Section -->
          <div class="flex-shrink-0 text-center w-20">
            <img
              src="https://placehold.co/64x64/EAB308/FFFFFF?text=MC"
              alt="Maria C."
              class="w-16 h-16 rounded-full mx-auto shadow-md border-2 border-white"
            />
            <!-- Star Rating -->
            <div class="flex justify-center text-yellow-400 mt-2">
              <!-- SVG Bintang 5x -->
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
            </div>
            <p class="text-sm font-semibold text-gray-800 mt-1.5">Maria C.</p>
          </div>
          <!-- Text Section -->
          <div class="text-left">
            <p class="text-gray-700 text-base leading-relaxed">
              "I was pretty skeptical, but this sticker turned out super cute! I
              use it as my FaceBook profile pic and friends keep asking where I
              made it!"
            </p>
          </div>
        </div>

        <!-- 3. Review Card 2 -->
        <div
          class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-md mb-4 flex items-start gap-5"
        >
          <!-- Avatar Section -->
          <div class="flex-shrink-0 text-center w-20">
            <img
              src="https://placehold.co/64x64/6366F1/FFFFFF?text=JR"
              alt="Jessica & Ryan"
              class="w-16 h-16 rounded-full mx-auto shadow-md border-2 border-white"
            />
            <!-- Star Rating -->
            <div class="flex justify-center text-yellow-400 mt-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
            </div>
            <p class="text-sm font-semibold text-gray-800 mt-1.5">
              Jessica & Ryan
            </p>
          </div>
          <!-- Text Section -->
          <div class="text-left">
            <p class="text-gray-700 text-base leading-relaxed">
              "Made this as an anniversary surprise and he literally called me
              crying laughing. Now he sends it every morning with his good
              morning text."
            </p>
          </div>
        </div>

        <!-- 4. Review Card 3 -->
        <div
          class="bg-white rounded-2xl shadow-lg p-6 w-full max-w-md mb-8 flex items-start gap-5"
        >
          <!-- Avatar Section -->
          <div class="flex-shrink-0 text-center w-20">
            <img
              src="https://placehold.co/64x64/EC4899/FFFFFF?text=AS"
              alt="Alex & Sam"
              class="w-16 h-16 rounded-full mx-auto shadow-md border-2 border-white"
            />
            <!-- Star Rating -->
            <div class="flex justify-center text-yellow-400 mt-2">
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
            </div>
            <p class="text-sm font-semibold text-gray-800 mt-1.5">Alex & Sam</p>
          </div>
          <!-- Text Section -->
          <div class="text-left">
            <p class="text-gray-700 text-base leading-relaxed">
              "My hubby and I made a couple of these and now our whole family
              group chat is just stickers flying around. My mom loves it!"
            </D>
          </div>
        </div>

        <!-- 5. Login Link -->
        <a
          href="#"
          class="bg-white rounded-full shadow-lg py-3 px-6 text-sm text-gray-700 font-medium inline-flex items-center gap-2 hover:bg-gray-50 transition"
          style="pointer-events: auto;"
        >
          <!-- Ikon User -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
            <circle cx="12" cy="7" r="4" />
          </svg>
          Returning? Login Here!
        </a>

        <!-- Tombol Refresh -->


        <div class="bg-white rounded-2xl shadow-lg p-8 w-full max-w-md text-center mt-12">
          <h2 class="text-3xl font-bold text-gray-900 mb-3">Contact Us</h2>
          <p class="text-gray-600 text-lg leading-relaxed mb-6">
            Have questions, feedback, or need help?
            <br />
            We'd love to hear from you.
          </p>

          <h3
            class="text-sm font-bold text-gray-800 tracking-wider uppercase inline-flex items-center gap-2 mb-2"
          >
            EMAIL US ANYTIME
            <!-- Ikon panah bawah -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-gray-500"
            >
              <path d="M12 5v14M19 12l-7 7-7-7" />
            </svg>
          </h3>

          <p class="text-gray-600 text-base mb-4">
            Please include the email address you used on
            <br />
            our site for faster service.
          </p>

          <!-- Tombol Email -->
          <a
            href="mailto:hello@makemeasticker.com"
            class="block bg-red-400 text-white font-bold py-4 px-6 rounded-2xl text-lg shadow-lg hover:bg-red-500 transition-all duration-300 transform hover:scale-105 mb-4"
          >
            hello@makemeasticker.com
          </a>

          <p class="text-gray-600 text-base">
            The more info you give us, the better we can
            <br />
            help you.
          </p>
        </div>
        <!-- AKHIR PERUBAHAN -->
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const stickerGrid = document.getElementById('sticker-grid');

        const stickerImageFiles = [
          'StickerAsset/Sticker01.webp',
          'StickerAsset/Sticker02.webp',
          'StickerAsset/Sticker03.webp',
          'StickerAsset/Sticker04.webp',
          'StickerAsset/Sticker05.webp',
          'StickerAsset/Sticker06.webp',
          'StickerAsset/Sticker07.webp',
          'StickerAsset/Sticker08.webp',
          'StickerAsset/Sticker09.webp',
          'StickerAsset/Sticker10.webp',
          'StickerAsset/Sticker11.webp',
          'StickerAsset/Sticker12.webp',
          'StickerAsset/Sticker13.webp',
          'StickerAsset/Sticker14.webp',
          'StickerAsset/Sticker15.webp',
          'StickerAsset/Sticker17.webp',
          'StickerAsset/Sticker18.webp',
          'StickerAsset/Sticker19.webp',
          'StickerAsset/Sticker20.webp',
        ];

        // --- PERUBAHAN: Menghitung baris (rows) secara dinamis ---
        const columns = window.innerWidth < 768 ? 4 : (window.innerWidth < 1024 ? 6 : 9); // 4 on mobile, 6 on md, 9 on lg
        const stickerWidth = window.innerWidth / columns;
        const stickerHeight = stickerWidth; // Karena aspect-square

        // Hitung berapa baris yang dibutuhkan untuk mengisi layar
        const dynamicRows = Math.ceil(window.innerHeight / stickerHeight);

        // Pastikan kita membuat setidaknya 1 baris
        const rows = Math.max(1, dynamicRows);

        const numStickersToGenerate = columns * rows;
        // --- AKHIR PERUBAHAN ---

        const stickerBackground = document.getElementById('sticker-background');
        // --- PERUBAHAN: Baris ini dihapus karena CSS (h-screen) sudah menangani ---
        // stickerBackground.style.height = `${rows * stickerHeight}px`;

        // --- OBSERVER LOGIC REMOVED ---

        // --- Function to create a single sticker ---
        function createSticker() {
          const randomIndex = Math.floor(
            Math.random() * stickerImageFiles.length
          );
          const imageUrl = stickerImageFiles[randomIndex];

          const stickerWrapper = document.createElement('div');
          stickerWrapper.className =
            'sticker-wrapper relative aspect-square flex items-center justify-center p-1';

          const sticker = document.createElement('div');
          sticker.className =
            'sticker-item w-full h-full bg-white bg-opacity-50 rounded-xl flex items-center justify-center transform shadow-sm overflow-hidden p-5';

          const img = document.createElement('img');
          img.src = imageUrl;
          img.alt = 'Sticker';
          img.className = 'w-full h-full object-contain p-2';
          img.loading = 'lazy';
          sticker.appendChild(img);

          stickerWrapper.appendChild(sticker);

          // GSAP hover animation
          stickerWrapper.addEventListener('mouseenter', () => {
            gsap.to(stickerWrapper, { zIndex: 5, duration: 0 });
            gsap.to(sticker, {
              scale: 1.2,
              duration: 0.4,
              ease: 'elastic.out(1, 0.5)',
            });
          });

          stickerWrapper.addEventListener('mouseleave', () => {
            gsap.to(sticker, {
              scale: 1,
              duration: 0.4,
              ease: 'elastic.out(1, 0.5)',
            });
            gsap.to(stickerWrapper, { zIndex: 0, duration: 0, delay: 0.4 });
          });

          return stickerWrapper;
        }

        // --- INFINITE SCROLL LOGIC REMOVED ---

        // --- Initial Sticker Creation (Dynamic Amount) ---
        for (let i = 0; i < numStickersToGenerate; i++) {
          const stickerWrapper = createSticker();
          stickerGrid.appendChild(stickerWrapper);
        }

        // Animate all stickers in on load
        document.querySelectorAll('.sticker-wrapper').forEach((sticker) => {
          // Set initial state
          gsap.set(sticker, { opacity: 0, scale: 0.8 });
          // Animate in
          gsap.to(sticker, {
            scale: 1,
            opacity: 1,
            duration: 0.8,
            ease: 'elastic.out(1, 0.5)',
            delay: Math.random() * 0.5,
          });
        });

        // --- NEW LOGIC: Refresh on Scroll Wheel ---
        let isRefreshing = false;
        const allStickers = document.querySelectorAll('.sticker-wrapper');

        function refreshAllStickers() {
          isRefreshing = true;

          allStickers.forEach((stickerWrapper) => {
            const img = stickerWrapper.querySelector('img');
            if (!img) return;

            // 1. Get new random image
            const randomIndex = Math.floor(
              Math.random() * stickerImageFiles.length
            );
            img.src = stickerImageFiles[randomIndex]; // Change image path

            // 2. Re-run the bubble animation from a hidden state
            gsap.fromTo(
              stickerWrapper,
              { opacity: 0, scale: 0.8 }, // From this state
              {
                // To this state
                opacity: 1,
                scale: 1,
                duration: 0.8,
                ease: 'elastic.out(1, 0.5)',
                delay: Math.random() * 0.5, // Stagger the refresh
              }
            );
          });

          // PERUBAHAN: Jeda diperpanjang untuk fix bug "refresh 2x"
          setTimeout(() => {
            isRefreshing = false;
          }, 1500); // Diubah dari 1000ms ke 1500ms
        }

        // PERUBAHAN: Listener 'wheel' diganti dengan 'click'
        const refreshButton = document.getElementById('refresh-button');
        if (refreshButton) {
          refreshButton.addEventListener('click', () => {
            if (isRefreshing) {
              return; // Don't refresh if already refreshing
            }
            refreshAllStickers();
          });
        }

        // Listener for scroll to refresh
        window.addEventListener('wheel', (event) => {
          if (isRefreshing) {
            return; // Don't refresh if already refreshing
          }
          refreshAllStickers();
        }, { passive: true });
        // --- END OF NEW LOGIC ---
      });
    </script>
  </body>
</html>

